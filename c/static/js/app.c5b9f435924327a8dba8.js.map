{"version":3,"sources":["webpack:///src/components/ConvertPanel.vue","webpack:///./src/components/ConvertPanel.vue?9470","webpack:///./src/components/ConvertPanel.vue","webpack:///src/App.vue","webpack:///./src/App.vue?332d","webpack:///./src/App.vue","webpack:///./src/main.js"],"names":["ConvertPanel","inputStr","nums","offset","input","i","c","plus","result","idx","start","num","level","end","newNums","components_ConvertPanel","render","_vm","this","_h","$createElement","_c","_self","attrs","id","staticClass","type","autosize","minRows","model","value","callback","$$v","expression","_v","staticStyle","max-width","placeholder","size","on","change","handleChange","_l","r","key","label","click","resultStr","staticRenderFns","App","__webpack_require__","normalizeComponent","ssrContext","selectortype_template_index_0_src_App","src_App","App_normalizeComponent","vue_esm","config","productionTip","component","lib_button_default","a","name","lib_select_default","lib_input_default","lib_option_default","el","template","components"],"mappings":"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","file":"static/js/app.c5b9f435924327a8dba8.js","sourcesContent":["<template>\n  <div id=\"container\">\n    <el-input\n      class=\"ipt\"\n      type=\"textarea\"\n      :autosize=\"{ minRows: 20}\"\n      v-model=\"inputStr\">\n    </el-input>\n    <div id=\"op\">\n      <el-select \n        v-model=\"offset\"\n        class=\"ops\"\n        placeholder=\"选择升降调\"\n        size=\"small\"\n        style=\"max-width: 150px\"\n        @change=\"handleChange\"\n        >\n        <el-option \n          v-for=\"r in selections\"\n          :key=\"r.value\"\n          :label=\"r.label\"\n          :value=\"r.value\"\n        >\n        </el-option>\n      </el-select>\n      <el-button class=\"ops\" type=\"primary\" v-on:click=\"handleChange\" size=\"small\">转换</el-button>\n      <!-- <el-button class=\"ops\" type=\"primary\" v-on:click=\"handleDown\" size=\"small\">降半key</el-button> -->\n    </div>\n    <el-input\n      class=\"opt\"\n      type=\"textarea\"\n      :autosize=\"{ minRows: 20}\"\n      placeholder=\"转换结果将在这里显示\"\n      v-model=\"resultStr\">\n    </el-input>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ConvertPanel',\n  data() {\n    return {\n      inputStr: '输入原调简谱，形如：\\n\\n[67]1234(12)\\n\\n可中途临时增加key：\\n+1\\n[67]1234(12)\\n\\n右边选择转换key即可输出结果。',\n      resultStr: '',\n      offset: 0,\n\n      selections: [\n        {\n          value: 6,\n          label: '+6(#F)'\n        },\n        {\n          value: 5,\n          label: '+5(F)'\n        },\n        {\n          value: 4,\n          label: '+4(E)'\n        },\n        {\n          value: 3,\n          label: '+3(bE)'\n        },\n        {\n          value: 2,\n          label: '+2(D)'\n        },\n        {\n          value: 1,\n          label: '+1(#C)'\n        },\n        {\n          value: -1,\n          label: '-1(B)'\n        },\n        {\n          value: -2,\n          label: '-2(bB)'\n        },\n        {\n          value: -3,\n          label: '-3(A)'\n        },\n        {\n          value: -4,\n          label: '-4(bA)'\n        },\n        {\n          value: -5,\n          label: '-5(G)'\n        }\n      ],\n      keyNumMap: {\n        '1': 25,\n        '#1': 26,\n        '2': 27,\n        '#2': 28,\n        '3': 29,\n        '#3': 30,\n        '4': 30,\n        '#4': 31,\n        '5': 32,\n        '#5': 33,\n        '6': 34,\n        '#6': 35,\n        '7': 36,\n        '#7': 37,\n      },\n      numKeyMap: {\n        25: '1',\n        26: '#1',\n        27: '2',\n        28: '#2',\n        29: '3',\n        30: '4',\n        31: '#4',\n        32: '5',\n        33: '#5',\n        34: '6',\n        35: '#6',\n        36: '7',\n      },\n    }\n  },\n  // watch: {\n  //   inputStr(curVal, oldVal) {\n  //     this.resultStr = this.change(curVal)\n  //   }\n  // },\n  methods: {\n    handleUp() {\n      let nums = this.getNumsFromInput(this.inputStr)\n      console.log('nums',nums)\n      nums = this.handleNums(nums, 1)\n      console.log('nums after offset',nums)\n      this.resultStr = this.getKeysFromNums(nums)\n    },\n    handleDown() {\n      let nums = this.getNumsFromInput(this.inputStr)\n      nums = this.handleNums(nums, -1)\n      this.resultStr = this.getKeysFromNums(nums)\n    },\n    handleChange() {\n      console.log('handleChange.offset', this.offset)\n      let nums = this.getNumsFromInput(this.inputStr)\n      nums = this.handleNums(nums, this.offset)\n      this.resultStr = this.getKeysFromNums(nums)\n    },\n    getNumsFromInput(input) {\n      console.log('getNumsFromInput.input', input)\n      let level = 0\n      let rise = false\n      let result = []\n      let hasPlus = false\n      let plus = 0\n      for (const i in input) {\n        const c = input.charAt(i)\n        console.log('getNumsFromInput.for.i', i, c)\n        if (hasPlus) {\n          plus = parseInt(c)\n          hasPlus = false\n          continue\n        }\n        \n        if (c == '{') {\n          level -= 2\n          continue\n        }\n        if (c == '}') {\n          level += 2\n          continue\n        }\n        if (c == '[') {\n          level -= 1\n          continue\n        }\n        if (c == ']') {\n          level += 1\n          continue\n        }\n        if (c == '(') {\n          level += 1\n          continue\n        }\n        if (c == ')') {\n          level -= 1\n          continue\n        }\n        if (c == '#') {\n          rise = true\n          continue\n        }\n        if (c == '+') {\n          hasPlus = true\n          continue\n        }\n\n        if (c >= 1 && c <= 7) {\n          let num = c\n          if (rise) {\n            num = this.keyNumMap['#'+c] + level*12\n            rise = false\n          } else{\n            num = this.keyNumMap[c] + level*12\n          }\n          result.push(num + plus)\n          continue\n        }\n        result.push(c)\n      }\n      return result\n    },\n    getKeysFromNums(nums) {\n      console.log('getKeysFromNums.nums', nums)\n      let result = ''\n      if (nums.length == 0) {\n        return result\n      }\n\n      let idx = 0 \n      while (typeof(nums[idx]) != 'number') {\n        result = result.concat(nums[idx])\n        idx++\n      }\n\n      let lastLevel = {}\n      if (idx < nums.length) {\n        lastLevel = this.getLevel(nums[idx])\n        result = result.concat(lastLevel.start)\n        result = result.concat(this.numKeyMap[nums[idx] - lastLevel.value*12])\n        idx++\n      }\n      \n      for (let i = idx; i < nums.length; i++) {\n        const num = nums[i]\n        if (typeof(num) != 'number') {\n          result = result.concat(lastLevel.end)\n          lastLevel = {value:0, start: '', end: ''}\n          result = result.concat(num)\n          continue\n        }\n        const level = this.getLevel(num)\n        console.log('getKeysFromNums.nums.i', i, num, level)\n        if (lastLevel.value != level.value) {\n          result = result.concat(lastLevel.end)\n          result = result.concat(level.start)\n          lastLevel = level\n          result = result.concat(this.numKeyMap[num - level.value*12])\n        } else {\n          result = result.concat(this.numKeyMap[num - level.value*12])\n        }\n      }\n      result = result.concat(lastLevel.end)\n      return result\n    },\n    getLevel(num) {\n      if (num >= 25 && num <= 36) {\n        return {value:0, start: '', end: ''}\n      } else if (num >= 37 && num <= 48) {\n        return {value:1, start: '(', end: ')'}\n      } else if (num >= 13 && num <= 24) {\n        return {value:-1, start: '[', end: ']'}\n      } else if (num >= 1 && num <= 12) {\n        return {value:-2, start: '{', end: '}'}\n      }\n    },\n    handleNums(nums, offset) {\n      let newNums = []\n      for (const i in nums) {\n        let num = nums[i]\n        if (num >= 1 && num <= 48) {\n          newNums.push(nums[i] + offset)\n        } else {\n          newNums.push(num)\n        }\n      }\n      return newNums\n    }\n  }\n}\n</script>\n\n<style>\n#container {\n  float: left;\n  height: 100%;\n  width: 800px;\n}\n.ipt {\n  float: left;\n  width: 40%;\n  height: 100%;\n}\n#op {\n  float: left;\n  width: 20%;\n  margin-top: 20%;\n  text-align: center;\n}\n.ops {\n  margin-bottom: 5px;\n}\n.opt {\n  float: right;\n  width: 40%;\n  height: 100%;\n}\n</style>\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/ConvertPanel.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"container\"}},[_c('el-input',{staticClass:\"ipt\",attrs:{\"type\":\"textarea\",\"autosize\":{ minRows: 20}},model:{value:(_vm.inputStr),callback:function ($$v) {_vm.inputStr=$$v},expression:\"inputStr\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"op\"}},[_c('el-select',{staticClass:\"ops\",staticStyle:{\"max-width\":\"150px\"},attrs:{\"placeholder\":\"选择升降调\",\"size\":\"small\"},on:{\"change\":_vm.handleChange},model:{value:(_vm.offset),callback:function ($$v) {_vm.offset=$$v},expression:\"offset\"}},_vm._l((_vm.selections),function(r){return _c('el-option',{key:r.value,attrs:{\"label\":r.label,\"value\":r.value}})})),_vm._v(\" \"),_c('el-button',{staticClass:\"ops\",attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.handleChange}},[_vm._v(\"转换\")])],1),_vm._v(\" \"),_c('el-input',{staticClass:\"opt\",attrs:{\"type\":\"textarea\",\"autosize\":{ minRows: 20},\"placeholder\":\"转换结果将在这里显示\"},model:{value:(_vm.resultStr),callback:function ($$v) {_vm.resultStr=$$v},expression:\"resultStr\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-e5bee880\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ConvertPanel.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-e5bee880\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ConvertPanel.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ConvertPanel.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ConvertPanel.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e5bee880\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ConvertPanel.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ConvertPanel.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <!-- <img src=\"./assets/logo.png\"> -->\n    <ConvertPanel/>\n  </div>\n</template>\n\n<script>\nimport ConvertPanel from './components/ConvertPanel'\n\nexport default {\n  name: 'app',\n  components: {\n    ConvertPanel\n  }\n}\n</script>\n\n<style>\n/* #app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n} */\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('ConvertPanel')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-aa6264d2\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-aa6264d2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-aa6264d2\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport { Button, Select, Input, Option } from 'element-ui'\nimport 'element-ui/lib/theme-chalk/index.css'\nimport App from './App'\n\nVue.config.productionTip = false\n// Vue.use(ElementUI)\nVue.component(Button.name, Button)\nVue.component(Select.name, Select)\nVue.component(Input.name, Input)\nVue.component(Option.name, Option)\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}